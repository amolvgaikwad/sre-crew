monitor_task:
  description: >
    Query Prometheus for RabbitMQ health.
    1. Check Node Count: Is 'count(rabbitmq_up)' < 3?
    2. Check Partitions: Is 'sum(rabbitmq_partitions)' > 0?
    
    Output strictly:
    - "ANOMALY: Node Count Low (Current: X)" if nodes < 3.
    - "ANOMALY: Split Brain" if partitions > 0.
    - "HEALTHY" if all checks pass.
  expected_output: "Status string."

investigation_task:
  description: >
    **RABBITMQ INCIDENT RESPONSE**
    Context: {anomaly_context}
    
    **Scenario A: Low Node Count**
    - IF the anomaly is "Node Count Low":
    - ACTION: Use 'ScaleStatefulSet' tool.
    - PARAMETERS: target='messaging/my-cluster-rabbitmq', replicas=3.
    - VERIFY: Output confirmation that scaling was triggered.

    **Scenario B: Network Partition / Split Brain**
    - ACTION: Do NOT restart automatically (risk of data loss).
    - ACTION: Use 'SendAlert' tool to summon a human operator immediately.
    
    **Output:** Final report of action taken.
  expected_output: "Action Report: 'Scaled Cluster' or 'Sent Alert'."

slo_task:
  description: >
    Audit RabbitMQ SLOs. Compare current node count vs target (3).
  expected_output: "SLO Compliance Report."
